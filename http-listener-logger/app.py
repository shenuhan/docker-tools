import uuid
from urllib.parse import quote
import os
from flask import Flask, redirect, request
import json

app = Flask(__name__)


@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def listenall(path):
    print("-PATH--------------------------------------------------------------------------")
    print(path)
    print("-HEADERS-----------------------------------------------------------------------")
    print(request.headers)
    print("-ARGS--------------------------------------------------------------------------")
    print(request.args)
    print("-DATA--------------------------------------------------------------------------")
    print(json.dumps(request.data))
    print("-END---------------------------------------------------------------------------")
    
    return '<pre>' + '\n' + \
    "-PATH--------------------------------------------------------------------------" + '\n' + \
    path + '\n' + \
    "-HEADERS-----------------------------------------------------------------------" + '\n' + \
    str(request.headers) + '\n' + \
    "-ARGS--------------------------------------------------------------------------" + '\n' + \
    str(request.args) + '\n' + \
    "-DATA--------------------------------------------------------------------------" + '\n' + \
    json.dumps(request.data) + '\n' + \
    "-END---------------------------------------------------------------------------" + '\n' + \
	'</pre>'

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=80, debug=True)